# WARNING. DO NOT EDIT THIS FILE.
# To override settings from this file, you can copy and paste the relevant
# sections into your printer.cfg and change it there.

[delayed_gcode _HYBRID_INIT]
initial_duration: 0.1
gcode:
	VERIFY_HYBRID_INVERTED

# Macro to perform a modified z_tilt supporting stowable probes
[gcode_macro Z_TILT_ADJUST]
rename_existing: Z_TILT_ADJUST_ORIG
gcode:
	# beacon contact config
	{% set beacon_contact_z_tilt_adjust_samples = printer["gcode_macro RatOS"].beacon_contact_z_tilt_adjust_samples|default(2)|int %}
	{% set beacon_contact_z_tilt_adjust = true if printer["gcode_macro RatOS"].beacon_contact_z_tilt_adjust|default(false)|lower == 'true' else false %}

	{% if printer["gcode_macro RatOS"].z_probe == 'stowable' %}
		DEPLOY_PROBE
	{% endif %}
	{% if printer.configfile.settings.beacon is defined and beacon_contact_z_tilt_adjust %}
		Z_TILT_ADJUST_ORIG PROBE_METHOD=contact SAMPLES={beacon_contact_z_tilt_adjust_samples}
	{% else %}
		Z_TILT_ADJUST_ORIG
	{% endif %}
	{% if printer["gcode_macro RatOS"].z_probe == 'stowable' %}
		STOW_PROBE
	{% endif %}
