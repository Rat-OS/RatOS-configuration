# WARNING. DO NOT EDIT THIS FILE.
# To override settings from this file, you can copy and paste the relevant
# sections into your printer.cfg and change it there.

# Print macros. Call these from your slicer (custom g-code). 
# You can copy these to printer.cfg and modify them to your liking, or just use them as is.
# Read more here: https://rat-rig.github.io/V-CoreOS/#/slicers
# Macro to perform a modified z_tilt supporting stowable probes

[gcode_macro Z_TILT_ADJUST]
rename_existing: Z_TILT_ADJUST_ORIG
gcode:
	# beacon contact config
	{% set beacon_contact_z_tilt_adjust = true if printer["gcode_macro RatOS"].beacon_contact_z_tilt_adjust|default(true)|lower == 'true' else false %}

	{% if printer["gcode_macro RatOS"].z_probe == 'stowable' %}
		DEPLOY_PROBE
	{% endif %}
	{% if beacon_contact_z_tilt_adjust %}
		Z_TILT_ADJUST_ORIG PROBE_METHOD=contact
	{% else %}
		Z_TILT_ADJUST_ORIG
	{% endif %}
	{% if printer["gcode_macro RatOS"].z_probe == 'stowable' %}
		STOW_PROBE
	{% endif %}
