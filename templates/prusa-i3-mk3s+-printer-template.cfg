## DO NOT EDIT THIS FILE, IT IS A TEMPLATE.
# Prusa i3 mk3s+ Klipper Config

# The first thing you'll need to do is go through this file and comment out / uncomment 
# the files and/or settings you need.
# You'll be able to print just fine with this config as it is, but it is recommended
# that you follow these steps to properly calibrate your printer:
# 0) Sanity check and PID Tuning: https://www.klipper3d.org/Config_checks.html
# 1) Pressure Advance: https://www.klipper3d.org/Pressure_Advance.html
# 2) Skew Correction: https://www.klipper3d.org/skew_correction.html
# 3) Resonance Compensation: https://www.klipper3d.org/Resonance_Compensation.html

# Read more about klipper here: https://www.klipper3d.org/Overview.html

### CONTROL BOARD

[include config/boards/einsy-rambo-prusa/config.cfg]

### BASE SETUP
[include config/printers/prusa-i3-mk3s+/prusa-i3.cfg]
[include config/printers/prusa-i3-mk3s+/steppers.cfg]
[include config/printers/prusa-i3-mk3s+/tmc2130.cfg]


### Stepper mechanical overrides
#[stepper_x]
#dir_pin: x_dir_pin # Add ! in front of pin name to reverse X stepper direction

#[stepper_y]
#dir_pin: y_dir_pin # Add ! in front of pin name to reverse Y stepper direction

#[stepper_z]
#dir_pin: z_dir_pin # Add ! in front of pin name to reverse Z stepper direction

#[extruder]
#dir_pin: e_dir_pin # Remove ! in front of pin name to reverse extruder direction

# Uncomment this next line if you have an ADXL345 connected to the rpi (you need to flash the rpi as mcu and activate spi first)
[include config/printers/prusa-i3-mk3s+/prusa_adxl.cfg]

#[input_shaper]
#shaper_freq_x: 52.6
#shaper_type_x: 3hump_ei
#shaper_freq_y: 58.0
#shaper_type_y: 2hump_ei

[include config/printers/prusa-i3-mk3s+/speed-limits.cfg]




[include config/extruders/prusa-i3mk3s+-bondtech.cfg]

# Hotend
[include config/hotends/v6.cfg]


# Pressure Advance
# Check https://www.klipper3d.org/Pressure_Advance.html for pressure advance tuning.
[extruder]
#pressure_advance: 0.05
### HOTEND HEATING
# PID Tuning (Remember to run PID tuning before printing)
control = pid
pid_kp = 55.713
pid_ki = 0.924
pid_kd = 839.874

### BED HEATING
# BED PID Tuning (Remember to run PID tuning before printing)
[heater_bed]
control = pid
pid_kp = 21.315
pid_ki = 1.269
pid_kd = 89.522


### MACROS
[include config/macros.cfg]
[include config/printers/prusa-i3-mk3s+/macros.cfg]
[include config/printers/prusa-i3-mk3s+/display.cfg]
[include config/printers/prusa-i3-mk3s+/runout_sensor.cfg]


### USER OVERRIDES
# Place all your overrides here
#[probe]
#z_offset: 0
## uncomment to override
## be careful with faster speeds
#[printer]
#max_velocity: 300
#max_accel: 6000
#max_z_velocity: 30
#max_z_accel: 1000
#max_accel_to_decel: 6000
#square_corner_velocity: 10